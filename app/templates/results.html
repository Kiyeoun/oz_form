<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>결과 페이지</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- 나와 같은 답변 비율 -->
        {% if same_result_chart %}
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="text-center" style="font-size: 50px;">설문 조사에 참여해주셔서 감사합니다.</h3>
                <div id="same_result_chart"></div>
            </div>
        </div>
        {% endif %}

        <!-- 질문별 응답 분포 -->
        <div class="row">
            {% for question_id, chart in question_charts.items() %}
            <div class="col-md-12 mb-4 d-flex justify-content-center">
                <div id="question_chart_{{ question_id }}"></div>
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        // 나와 같은 답변 비율 차트 렌더링
        {% if same_result_chart %}
        const sameResultData = JSON.parse('{{ same_result_chart | safe }}');
        Plotly.newPlot('same_result_chart', sameResultData.data, sameResultData.layout);
        {% endif %}

        // 질문별 응답 차트 렌더링
        {% for question_id, chart in question_charts.items() %}
        const chartData{{ question_id }} = JSON.parse('{{ chart | safe }}');
        Plotly.newPlot('question_chart_{{ question_id }}', chartData{{ question_id }}.data, chartData{{ question_id }}.layout);
        {% endfor %}
    </script>
</body>
</html>
